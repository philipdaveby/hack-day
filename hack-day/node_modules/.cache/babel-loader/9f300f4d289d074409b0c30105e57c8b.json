{"ast":null,"code":"var _jsxFileName = \"/Users/philipdaveby/Salt/hack-day/hack-day/src/components/ExercisePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ExercisePage = props => {\n  _s();\n\n  const [exercises, setExercises] = props.useStickyState(null, 'exercises');\n  const [displayAddExercise, setDisplayAddExercise] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    callApi().then(res => setExercises(res)).catch(err => console.log(err)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const callApi = async () => {\n    const response = await fetch('/api/exercises');\n    const body = await response.json();\n\n    if (response.status !== 200) {\n      throw Error(body.message);\n    }\n\n    return body;\n  };\n\n  const filterExercises = query => {\n    setExercises(exercises.map(exercise => {\n      if (exercise.title.toLowerCase().match(query.toLowerCase()) || exercise.category.toLowerCase().match(query.toLowerCase())) {\n        exercise.isFilteredOut = false;\n        return exercise;\n      }\n\n      exercise.isFilteredOut = true;\n      return exercise;\n    }));\n  };\n\n  const removeWorkout = e => {\n    props.workout.forEach((obj, i) => {\n      if (obj.id.toString() === e.currentTarget.id) {\n        props.workout.splice(i, 1);\n        props.setWorkout(props.workout);\n      }\n    });\n  };\n\n  const addWorkout = e => {\n    exercises.forEach(exercise => {\n      if (e.currentTarget.id !== exercise.id.toString()) {\n        return;\n      }\n\n      const updatedWorkout = [...props.workout, exercise];\n      props.setWorkout(updatedWorkout);\n    });\n  };\n\n  const toggleWorkout = e => {\n    const objExists = props.workout.filter(exercise => exercise.id.toString() === e.currentTarget.id);\n\n    if (objExists[0]) {\n      removeWorkout(e);\n      return;\n    }\n\n    addWorkout(e);\n  };\n\n  const toggleChooseExercise = e => {\n    setExercises(exercises.map(exercise => {\n      if (e.currentTarget.id === exercise.id.toString()) {\n        exercise.clicked ? exercise.clicked = false : exercise.clicked = true;\n        exercise.clicked ? e.currentTarget.className = 'exercise-page__li clicked' : e.currentTarget.className = 'exercise-page__li';\n      }\n\n      return exercise;\n    }));\n    toggleWorkout(e);\n  };\n\n  const saveWorkout = async e => {\n    e.preventDefault();\n    const updatedObject = {\n      title: e.target.title.value,\n      workout: props.workout\n    };\n    props.setWorkouts([...props.workouts, updatedObject]);\n    e.target.title.value = '';\n    props.setWorkout([]);\n    await fetch('/api/workout', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updatedObject)\n    }).then(res => {}).catch(err => console.log(err));\n    history.push('/workouts');\n  };\n\n  const newExercise = () => {\n    displayAddExercise ? setDisplayAddExercise(false) : setDisplayAddExercise(true);\n    setTimeout(() => window.scrollBy(0, 100), 100);\n  };\n\n  const sendNewExercise = async exerciseObject => {\n    await fetch('/api/exercise', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(exerciseObject)\n    }).then(res => {}).catch(err => console.log(err));\n  };\n\n  const addExercise = e => {\n    e.preventDefault();\n\n    if (!e.target.exercise__title.value || !e.target.exercise__category.value) {\n      return;\n    }\n\n    const newExercise = {\n      title: e.target.exercise__title.value,\n      category: e.target.exercise__category.value.toLowerCase(),\n      id: exercises.length,\n      clicked: false\n    };\n    sendNewExercise(newExercise);\n    callApi().then(res => setExercises(res)).catch(err => console.log(err));\n    setDisplayAddExercise(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exercise-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"exercise-page__header\",\n      children: \"Create your workout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"exercise-page__list\",\n      children: exercises ? exercises.map(exercise => {\n        return !exercise.isFilteredOut ? /*#__PURE__*/_jsxDEV(\"li\", {\n          id: exercise.id,\n          onClick: e => toggleChooseExercise(e),\n          className: \"exercise-page__li\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: exercise.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), exercise.category]\n        }, exercise.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 47\n        }, this) : '';\n      }) : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exercise-page__new-exercise\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"exercise-page__new-button\",\n        onClick: newExercise,\n        children: \"NEW EXERCISE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }, this), displayAddExercise ? /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"new-exercise__add\",\n        onSubmit: e => addExercise(e),\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"new-exercise__input\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"exercise__title\",\n            type: \"text\",\n            placeholder: \"Enter a title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"exercise__category\",\n            type: \"text\",\n            placeholder: \"Enter a category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"SAVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exercise-page__forms\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"exercise-page__save\",\n        onSubmit: e => saveWorkout(e),\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"title\",\n          type: \"text\",\n          placeholder: \"Enter a title\",\n          className: \"exercise-page__input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"SAVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"exercise-page__search\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: e => filterExercises(e.target.value),\n          placeholder: \"Search..\",\n          className: \"exercise-page__input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"SEARCH\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ExercisePage, \"qll79St6NRW23sc5plaLdzB2YIQ=\", true, function () {\n  return [useHistory];\n});\n\n_c = ExercisePage;\nexport default ExercisePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExercisePage\");","map":{"version":3,"sources":["/Users/philipdaveby/Salt/hack-day/hack-day/src/components/ExercisePage.js"],"names":["React","useEffect","useState","useHistory","ExercisePage","props","exercises","setExercises","useStickyState","displayAddExercise","setDisplayAddExercise","history","callApi","then","res","catch","err","console","log","response","fetch","body","json","status","Error","message","filterExercises","query","map","exercise","title","toLowerCase","match","category","isFilteredOut","removeWorkout","e","workout","forEach","obj","i","id","toString","currentTarget","splice","setWorkout","addWorkout","updatedWorkout","toggleWorkout","objExists","filter","toggleChooseExercise","clicked","className","saveWorkout","preventDefault","updatedObject","target","value","setWorkouts","workouts","method","headers","JSON","stringify","push","newExercise","setTimeout","window","scrollBy","sendNewExercise","exerciseObject","addExercise","exercise__title","exercise__category","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nconst ExercisePage = props => {\n\n  const [exercises, setExercises] = props.useStickyState(null, 'exercises');\n  const [displayAddExercise, setDisplayAddExercise] = useState(false);\n  const history = useHistory();\n  \n  useEffect(() => {\n    callApi()\n    .then(res => setExercises(res))\n    .catch(err => console.log(err));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  \n  const callApi = async () => {\n    const response = await fetch('/api/exercises');\n    const body = await response.json();\n    if (response.status !== 200) {\n      throw Error(body.message);\n    }\n    return body;\n  };\n\n  const filterExercises = query => {\n    setExercises(exercises.map(exercise => {\n      if (exercise.title.toLowerCase().match(query.toLowerCase()) || exercise.category.toLowerCase().match(query.toLowerCase())) {\n        exercise.isFilteredOut = false;\n        return exercise;\n      }\n        exercise.isFilteredOut = true;\n        return exercise;\n   }))\n  };\n\n  const removeWorkout = e => {\n    \n    props.workout.forEach((obj, i) => {\n      if (obj.id.toString() === e.currentTarget.id) {\n        props.workout.splice(i, 1);\n        props.setWorkout(props.workout);\n      }\n    });\n  };\n\n  const addWorkout = e => {\n    exercises.forEach(exercise => {\n      if (e.currentTarget.id !== exercise.id.toString()) {\n        return;\n      }\n      const updatedWorkout = [...props.workout, exercise]\n      props.setWorkout(updatedWorkout);\n    });\n  };\n\n  const toggleWorkout = e => {\n    const objExists = props.workout.filter(exercise => exercise.id.toString() === e.currentTarget.id);\n    if (objExists[0]) {\n      removeWorkout(e);\n      return;\n    }\n    addWorkout(e);\n  };\n\n  const toggleChooseExercise = e => {\n    setExercises(exercises.map(exercise => {\n      if (e.currentTarget.id === exercise.id.toString()) {\n        exercise.clicked ? exercise.clicked = false : exercise.clicked = true;\n        exercise.clicked ? e.currentTarget.className = 'exercise-page__li clicked' : e.currentTarget.className = 'exercise-page__li';\n      }\n      return exercise;\n    }));\n    toggleWorkout(e);\n  };\n\n  const saveWorkout = async e => {\n    e.preventDefault();\n    const updatedObject = {\n      title: e.target.title.value,\n      workout: props.workout\n    }\n\n    props.setWorkouts([...props.workouts, updatedObject]);\n    e.target.title.value = '';\n\n    props.setWorkout([]);\n\n    await fetch('/api/workout', {\n      method: 'POST', \n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updatedObject)\n    }).then(res => {\n    }).catch(err => console.log(err));\n\n    history.push('/workouts');\n  };\n\n  const newExercise = () => {\n    displayAddExercise ? setDisplayAddExercise(false) : setDisplayAddExercise(true);\n    setTimeout(() => window.scrollBy(0, 100), 100)\n  }\n\n  const sendNewExercise = async exerciseObject => {\n    await fetch('/api/exercise', {\n      method: 'POST', \n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(exerciseObject)\n    }).then(res => {\n    }).catch(err => console.log(err));\n  };\n\n  const addExercise = e => {\n    e.preventDefault();\n\n    if (!e.target.exercise__title.value || !e.target.exercise__category.value) {\n      return;\n    }\n    const newExercise = {\n      title: e.target.exercise__title.value,\n\t\t  category: e.target.exercise__category.value.toLowerCase(),\n\t\t  id: exercises.length,\n\t\t  clicked: false\n    };\n    sendNewExercise(newExercise);\n    callApi()\n    .then(res => setExercises(res))\n    .catch(err => console.log(err));\n\n    setDisplayAddExercise(false);\n  }\n\n  return (\n    <div className=\"exercise-page\">\n      <h2 className=\"exercise-page__header\">Create your workout</h2>\n          <ul className=\"exercise-page__list\">{\n          exercises ? exercises.map(exercise => {\n            return !exercise.isFilteredOut ? (<li key={exercise.id} id={exercise.id} onClick={e => toggleChooseExercise(e)} className=\"exercise-page__li\">\n              <h3>{exercise.title}</h3>\n              {exercise.category}\n              </li>) : ''\n          }) : ''\n          }</ul>\n          <div className=\"exercise-page__new-exercise\">\n            <button className=\"exercise-page__new-button\" onClick={newExercise}>NEW EXERCISE</button>\n            {displayAddExercise ? \n              <form className=\"new-exercise__add\" onSubmit={e => addExercise(e)}>\n                <section className=\"new-exercise__input\">\n                  <input\n                    name=\"exercise__title\"\n                    type=\"text\"\n                    placeholder=\"Enter a title\"\n                    />\n                    <input\n                    name=\"exercise__category\"\n                    type=\"text\"\n                    placeholder=\"Enter a category\"\n                    />\n                </section>\n                <button type=\"submit\">SAVE</button>\n            </form>\n          : ''}\n        </div>\n      <div className=\"exercise-page__forms\">\n        <form className=\"exercise-page__save\" onSubmit={e => saveWorkout(e)}>\n          <input\n            name=\"title\"\n            type=\"text\"\n            placeholder=\"Enter a title\"\n            className=\"exercise-page__input\"\n            />\n            <button type=\"submit\">SAVE</button>\n        </form>\n        <form className=\"exercise-page__search\">\n          <input\n            type=\"text\"\n            onChange={e => filterExercises(e.target.value)}\n            placeholder=\"Search..\"\n            className=\"exercise-page__input\"\n            />\n          <button type=\"submit\">SEARCH</button>\n        </form>\n      </div>\n    </div>\n  );  \n\n};\n\nexport default ExercisePage;\n"]},"metadata":{},"sourceType":"module"}