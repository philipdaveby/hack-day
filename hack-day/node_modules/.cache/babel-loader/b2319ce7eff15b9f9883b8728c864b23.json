{"ast":null,"code":"var _jsxFileName = \"/Users/philipdaveby/Salt/hack-day/hack-day/src/components/Workout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Workout = props => {\n  _s();\n\n  let [list, setList] = props.useStickyState(null);\n  const [dragging, setDragging] = props.useStickyState(false);\n  list = props.workout;\n  const dragItem = useRef();\n  const dragNode = useRef();\n\n  const handleDragStart = (e, objIndex) => {\n    dragItem.current = objIndex;\n    dragNode.current = e.target;\n    dragNode.current.addEventListener('dragend', handleDragEnd);\n    setTimeout(() => {\n      setDragging(true);\n    }, 0);\n  };\n\n  const getDraggingStyle = (done, exercise) => {\n    const currentItem = dragItem.current;\n\n    if (dragging) {\n      if (currentItem === exercise) {\n        return done ? \"workouts__exercise done current-dragging\" : \"workouts__exercise current-dragging\";\n      }\n\n      return done ? \"workouts__exercise done\" : \"workouts__exercise\";\n    }\n\n    return done ? \"workouts__exercise done\" : \"workouts__exercise\";\n  };\n\n  const handleDragEnter = (e, exercise) => {\n    const currentItem = dragItem.current;\n\n    if (e.target !== dragNode.current) {\n      setList(list.splice(exercise, 0, list.splice(currentItem, 1)[0]));\n      dragItem.current = exercise;\n    }\n  };\n\n  const handleDragEnd = () => {\n    setDragging(false);\n\n    if (dragNode.current !== null) {\n      dragNode.current.removeEventListener('dragend', handleDragEnd);\n    }\n\n    dragItem.current = null;\n    dragNode.current = null;\n  };\n\n  const toggleDone = e => {\n    e.stopPropagation();\n    props.setWorkouts(props.workouts.map(workout => {\n      if (workout.workoutId.toString() === e.currentTarget.parentNode.parentNode.parentNode.id) {\n        workout.workout.map(exercise => {\n          if (e.currentTarget.id === exercise.id.toString()) {\n            exercise.done ? exercise.done = false : exercise.done = true;\n            return exercise;\n          }\n\n          return exercise;\n        });\n      }\n\n      return workout;\n    }));\n  };\n\n  const deleteWorkout = async e => {\n    await fetch(`/api/workout/remove/${e.currentTarget.parentNode.parentNode.parentNode.parentNode.id}`);\n    props.getWorkouts().then(res => props.setWorkouts(res)).catch(err => console.log(err));\n  };\n\n  const restart = e => {\n    e.stopPropagation();\n    props.setWorkouts(props.workouts.map(exercises => {\n      if (exercises.id.toString() === e.currentTarget.parentNode.parentNode.parentNode.parentNode.id) {\n        exercises.workout.map(exercise => {\n          exercise.done = false;\n          return exercise;\n        });\n      }\n\n      return exercises;\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"workout__list\",\n      children: [props.workout[0] ? list.map((obj, objIndex) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          draggable: true,\n          onDragStart: e => handleDragStart(e, objIndex),\n          id: obj.id,\n          onClick: e => toggleDone(e),\n          className: getDraggingStyle(obj.done, objIndex),\n          onDragEnter: dragging ? e => {\n            handleDragEnter(e, objIndex);\n          } : null,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [obj.title, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: obj.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, obj._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this);\n      }) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workouts__buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: props.workout.id,\n          className: \"workouts__button-delete\",\n          onClick: e => deleteWorkout(e),\n          children: \"DELETE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: props.workout.id,\n          className: \"workouts__button-restart\",\n          onClick: e => restart(e),\n          children: \"RESTART\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Workout, \"yqt0fmMiNy/LjRhKr2bYfPJQf4Q=\", true);\n\n_c = Workout;\nexport default Workout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Workout\");","map":{"version":3,"sources":["/Users/philipdaveby/Salt/hack-day/hack-day/src/components/Workout.js"],"names":["React","useRef","Workout","props","list","setList","useStickyState","dragging","setDragging","workout","dragItem","dragNode","handleDragStart","e","objIndex","current","target","addEventListener","handleDragEnd","setTimeout","getDraggingStyle","done","exercise","currentItem","handleDragEnter","splice","removeEventListener","toggleDone","stopPropagation","setWorkouts","workouts","map","workoutId","toString","currentTarget","parentNode","id","deleteWorkout","fetch","getWorkouts","then","res","catch","err","console","log","restart","exercises","obj","title","category","_id"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\n\nconst Workout = props => {\n\n  let [list, setList] = props.useStickyState(null);\n  const [dragging, setDragging] = props.useStickyState(false);\n\n  list = props.workout;\n\n  const dragItem = useRef();\n  const dragNode = useRef();\n  \n  const handleDragStart = (e, objIndex) => {\n    dragItem.current = objIndex;\n    dragNode.current = e.target;\n    dragNode.current.addEventListener('dragend', handleDragEnd);\n    setTimeout(() => {\n      setDragging(true);\n    }, 0);\n  }\n\n  const getDraggingStyle = (done, exercise) => {\n\n    const currentItem = dragItem.current;\n\n    if (dragging) {\n      if (currentItem === exercise) {\n        return done ? \"workouts__exercise done current-dragging\" : \"workouts__exercise current-dragging\";\n      }\n      return done ? \"workouts__exercise done\" : \"workouts__exercise\";\n    }\n    return done ? \"workouts__exercise done\" : \"workouts__exercise\";\n  }\n\n  const handleDragEnter = (e, exercise) => {\n    const currentItem = dragItem.current;\n\n    if (e.target !== dragNode.current) {\n      setList(list.splice(exercise, 0, list.splice(currentItem, 1)[0]))\n      dragItem.current = exercise;\n    }\n  }\n  \n  const handleDragEnd = () => {\n    setDragging(false);\n    if (dragNode.current !== null) {\n      dragNode.current.removeEventListener('dragend', handleDragEnd);\n    }\n    dragItem.current = null;\n    dragNode.current = null;\n  }\n\n  const toggleDone = e => {\n    e.stopPropagation();\n\n    props.setWorkouts(props.workouts.map(workout => {\n      if (workout.workoutId.toString() === e.currentTarget.parentNode.parentNode.parentNode.id) {\n        workout.workout.map(exercise => {\n          if (e.currentTarget.id === exercise.id.toString()) {\n            exercise.done ? exercise.done = false : exercise.done = true;\n            return exercise;\n          } \n          return exercise;\n        });\n      }\n      return workout;\n    }));\n  };\n\n  const deleteWorkout = async e => {\n    await fetch(`/api/workout/remove/${e.currentTarget.parentNode.parentNode.parentNode.parentNode.id}`);\n\n    props.getWorkouts()\n    .then(res => props.setWorkouts(res))\n    .catch(err => console.log(err));\n  };\n\n  const restart = e => {\n    e.stopPropagation();\n\n    props.setWorkouts(props.workouts.map(exercises => {\n      if (exercises.id.toString() === e.currentTarget.parentNode.parentNode.parentNode.parentNode.id) {\n        exercises.workout.map(exercise => {\n          exercise.done = false;\n          return exercise;\n        });\n      }\n      return exercises;\n    }));\n  }\n\n  return (\n    <div>\n      <ul className=\"workout__list\">\n        {props.workout[0] ? list.map((obj, objIndex) => {\n          return (\n            <li\n              draggable\n              onDragStart={e => handleDragStart(e, objIndex)}\n              key={obj._id} id={obj.id}\n              onClick={e => toggleDone(e)}\n              className={getDraggingStyle(obj.done, objIndex)}\n              onDragEnter={dragging ? e => {handleDragEnter(e, objIndex)} : null}\n              >\n              <h2>{obj.title} </h2>\n              <p >{obj.category}</p>\n            </li>\n          )\n            }) : ''\n        }\n        <div className=\"workouts__buttons\">\n          <button id={props.workout.id} className=\"workouts__button-delete\" onClick={e => deleteWorkout(e)}>DELETE</button>\n          <button id={props.workout.id} className=\"workouts__button-restart\" onClick={e => restart(e)}>RESTART</button>\n        </div>\n      </ul>\n    </div>\n  );\n}\n\nexport default Workout;\n"]},"metadata":{},"sourceType":"module"}